{"version":3,"sources":["containers/Api.js","components/Event.js","containers/EventsList.js","containers/User.js","App.js","index.js"],"names":["SERVER","DATE_TIME_REGEX","parseDates","data","Object","keys","forEach","key","match","Date","request","params","method","path","body","values","opts","headers","Headers","Accept","JSON","stringify","mode","cache","fetch","vals","map","join","URL","then","response","json","status","Error","payload","Event","User","name","email","users","UserEvents","create","user","event","events","id","update","userEvent","rating","userevents","delete","trimHours","dateTime","Math","floor","props","handleShowMore","extended","state","setState","handleLinkBtnClick","a","async","scheduled","action","onChange","newState","this","isSingleDay","info","begins","ends","format","beginDay","title","description","category","logged","undefined","className","formattedSchedule","style","display","type","onClick","endDay","React","Component","EventsList","eventNodes","current","updateState","createRef","ref","linkByEventId","eventId","find","event_id","hideForm","formVisible","handleLogClick","login","target","dataset","nameInput","value","emailInput","handleSubmitClick","doLogin","doSignup","catch","message","alert","finally","scheduleMemo","focus","push","filter","evt","it","Api","doOnChange","fontSize","color","data-login","placeholder","App","addEventToUser","addEvent","removeEventFromUser","schedule","removeEvent","handleOnUserChange","links","eventsList","eventsInfo","sched","updateEvent","handleOnEventChange","fetchEvents","sort","b","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f1f19990.chunk.js","sourcesContent":["const SERVER = 'https://events-calendar-morelia.herokuapp.com';\nconst DATE_TIME_REGEX = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z/;\n\nconst URL = (path = '', values = {}) => {\n  const vals = Object.keys(values).map((key) => `/${key}/${values[key]}`).join('');\n  return `${SERVER}${vals}/${path}`;\n};\n\nconst parseDates = (data) => {\n  switch (typeof data) {\n    case 'object': {\n      if (data) {\n        Object.keys(data).forEach((key) => { data[key] = parseDates(data[key]); });\n      }\n      return data;\n    }\n\n    case 'string':\n      return data.match(DATE_TIME_REGEX) ? new Date(data) : data;\n\n    default:\n      return data;\n  }\n};\n\nconst request = (params) => {\n  const {\n    method = 'GET', path = '', body = null, ...values\n  } = params;\n\n  const opts = {\n    method,\n    headers: new Headers({\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    }),\n    body: body && JSON.stringify(body),\n    mode: 'cors',\n    cache: 'default',\n  };\n\n  return fetch(URL(path, values), opts)\n    .then((response) => response.json())\n    .then((data) => {\n      if (data.status !== 'ok') {\n        throw Error(data.status);\n      }\n      return data.payload;\n    })\n    .then(parseDates);\n};\n\nconst Event = {\n  index: () => request({ path: 'events' }),\n};\n\nconst User = {\n  create: (name, email) => request({ method: 'POST', path: 'users', body: { name, email } }),\n  findByName: (name) => request({ users: name }),\n};\n\nconst UserEvents = {\n  create: (user, event) => request({\n    method: 'POST', path: 'userevents', events: event.id, users: user.name,\n  }),\n  update: (userEvent, rating) => request({ method: 'PUT', userevents: userEvent, body: { rating } }),\n  delete: (userEvent) => request({ method: 'DELETE', userevents: userEvent }),\n};\n\nexport {\n  SERVER,\n  URL,\n  Event,\n  User,\n  UserEvents,\n};\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/prefer-stateless-function */\nimport React from 'react';\nimport format from 'date-format';\nimport './Event.sass';\n\nconst DATE_FORMAT = 'dd/MM/yyyy at hh:mm';\nconst DAY_IN_MILIS = 86400000;\n\nconst trimHours = (dateTime) => new Date(Math.floor(dateTime / DAY_IN_MILIS) * DAY_IN_MILIS);\n\n// const { id, title, description, begins, ends, category }\nexport default class Event extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      extended: !!props.extended,\n      rating: null,\n    };\n  }\n\n  get id() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return this.props.info.id;\n  }\n\n  get beginDay() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return trimHours(this.props.info.begins);\n  }\n\n  get endDay() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return trimHours(this.props.info.ends);\n  }\n\n  get isSingleDay() {\n    return Math.floor(this.beginDay) === Math.floor(this.endDay);\n  }\n\n  handleShowMore = () => {\n    const { extended } = this.state;\n    this.setState({ extended: !extended });\n  }\n\n  handleLinkBtnClick = async () => {\n    const { scheduled } = this.state;\n\n    // eslint-disable-next-line react/destructuring-assignment\n    const action = this.props.onChange(this, { scheduled: !scheduled });\n    if (action) {\n      await action.then(() => {\n        this.setState({ scheduled: !scheduled });\n      });\n    }\n  }\n\n  updateState(newState) {\n    const { scheduled, rating } = newState;\n    this.setState({ scheduled, rating });\n  }\n\n  formattedSchedule() {\n    if (this.isSingleDay) {\n      const { info: { begins, ends } } = this.props;\n      if (begins % DAY_IN_MILIS === ends % DAY_IN_MILIS) { // Extract the hours part\n        return `On ${format('dd/MM/yyyy', this.beginDay)}, at ${format('hh:mm', begins)}`;\n      }\n\n      return `On ${format('dd/MM/yyyy', this.beginDay)}, from ${format('hh:mm', begins)} to ${format('hh:mm', ends)}`;\n    }\n\n    const { info: { begins, ends } } = this.props;\n    return `From ${format(DATE_FORMAT, begins)} to ${format(DATE_FORMAT, ends)}`;\n  }\n\n  render() {\n    const {\n      info: {\n        title,\n        description,\n        category,\n      },\n    } = this.props;\n\n    const { extended, scheduled, rating } = this.state;\n    const logged = (scheduled !== undefined);\n\n    return (\n      <div className=\"Event\">\n        <div className=\"time-line\" />\n        <div className=\"schedule\">{this.formattedSchedule()}</div>\n        <div className=\"rating\">{rating}</div>\n        <div className=\"title\">{title}</div>\n        <div className=\"description\" style={extended ? {} : { display: 'none' }}>{extended ? description : ''}</div>\n        <div className=\"category\">{category}</div>\n        <button type=\"button\" className={`btn ${scheduled ? 'scheduled' : 'add'}`} style={logged ? {} : { display: 'none' }} onClick={this.handleLinkBtnClick}>\n          <span>{scheduled ? '- schedule' : '+ schedule'}</span>\n        </button>\n        <button type=\"button\" className=\"more\" onClick={this.handleShowMore}>\n          { extended ? 'Show less' : 'Show more' }\n        </button>\n      </div>\n    );\n  }\n}\n","/* eslint-disable react/prefer-stateless-function */\nimport React from 'react';\nimport './EventsList.sass';\nimport Event from '../components/Event';\n\nexport default class EventsList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      events: null,\n    };\n    this.eventNodes = {};\n  }\n\n  componentDidUpdate() {\n  }\n\n  set eventsInfo(events) {\n    this.setState({ events });\n  }\n\n  updateEvent(id, { scheduled, rating }) {\n    this.eventNodes[id].current.updateState({ scheduled, rating });\n  }\n\n  render() {\n    const { onChange } = this.props;\n    const { events } = this.state;\n\n    return (\n      <div className=\"events-list\">\n        { events ? events.map((event) => {\n          const { id } = event;\n          this.eventNodes[id] = this.eventNodes[id] || React.createRef();\n          return (\n            <Event\n              key={id}\n              ref={this.eventNodes[id]}\n              info={event}\n              onChange={onChange}\n            />\n          );\n        }) : 'Loading...'}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './User.sass';\nimport * as Api from './Api';\n\nexport default class User extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: null,\n      formVisible: false,\n      login: true,\n      events: null,\n    };\n    this.nameInput = React.createRef();\n    this.emailInput = React.createRef();\n    this.scheduleMemo = null;\n  }\n\n  componentDidUpdate() {\n    // eslint-disable-next-line react/destructuring-assignment\n    if (this.state.formVisible) this.nameInput.current.focus();\n  }\n\n  get name() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return this.state.name;\n  }\n\n  get schedule() {\n    if (this.scheduleMemo) return this.scheduleMemo;\n\n    const { events } = this.state;\n    this.scheduleMemo = {};\n    // eslint-disable-next-line camelcase\n    events.forEach(({ id, event_id, rating }) => { this.scheduleMemo[event_id] = { id, rating }; });\n    return this.scheduleMemo;\n  }\n\n  linkByEventId = (eventId) => {\n    const { events } = this.state;\n    if (!events) return null;\n\n    // eslint-disable-next-line camelcase\n    return events.find(({ event_id }) => eventId === event_id);\n  }\n\n  hideForm = () => {\n    this.setState({\n      formVisible: false,\n    });\n  }\n\n  handleLogClick = ({ target: { dataset: { login } } }) => {\n    this.nameInput.current.value = 'Monstruo';\n    this.emailInput.current.value = '';\n    this.setState({\n      formVisible: true,\n      login,\n    });\n  }\n\n  handleSubmitClick = () => {\n    if (this.nameInput.current.value === '') {\n      this.hideForm();\n      return;\n    }\n\n    // eslint-disable-next-line react/destructuring-assignment\n    (this.state.login ? this.doLogin() : this.doSignup())\n      .catch(({ message }) => {\n        alert(message);\n      })\n      .finally(this.hideForm);\n  }\n\n  // eslint-disable-next-line camelcase\n  addEvent({ id, event_id, rating }) {\n    this.scheduleMemo = null;\n    const { events } = this.state;\n    events.push({ id, event_id, rating });\n    this.setState({ events });\n  }\n\n  removeEvent({ id }) {\n    this.scheduleMemo = null;\n    const { events } = this.state;\n    this.setState({ events: events.filter((evt) => evt.it !== id) });\n  }\n\n  doOnChange(name, userevents = []) {\n    this.scheduleMemo = null;\n    this.setState({ name, events: userevents });\n    this.props.onChange(name, userevents);\n  }\n\n  async doSignup() {\n    const name = this.nameInput.current.value;\n    const email = this.emailInput.current.value;\n    return Api.User\n      .create(name, email)\n      .then(({ name }) => {\n        this.doOnChange(name);\n      });\n  }\n\n  async doLogin() {\n    const name = this.nameInput.current.value;\n    return Api.User\n      .findByName(name)\n      .then(({ name, userevents }) => {\n        this.doOnChange(name, userevents);\n      });\n  }\n\n  render() {\n    const { login, formVisible } = this.state;\n    return (\n      <div className=\"User\">\n        <div className=\"name\" style={this.name ? {} : { fontSize: '0.9rem', color: 'lightgrey' }}>\n          {this.name ? `Welcome ${this.name}!` : 'Login to save your schedule  \\u2933'}\n        </div>\n        <button type=\"button\" className=\"login\" data-login onClick={this.handleLogClick}>\n          Login\n        </button>\n        <button type=\"button\" className=\"signup\" onClick={this.handleLogClick}>\n          Signup\n        </button>\n        <div className=\"form\" style={formVisible ? {} : { display: 'none' }}>\n          <input type=\"input\" className=\"name-in\" ref={this.nameInput} placeholder=\"Name\" />\n          <input type=\"email\" className=\"email-in\" ref={this.emailInput} placeholder=\"email\" style={login ? { display: 'none' } : {}} />\n          <button type=\"button\" className=\"submit\" onClick={this.handleSubmitClick}>\n            {login ? 'Log In' : 'Sign Up'}\n          </button>\n          <button type=\"button\" className=\"cancel\" onClick={this.hideForm}>\n            Cancel\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport * as Api from './containers/Api';\nimport EventsList from './containers/EventsList';\nimport User from './containers/User';\nimport './App.sass';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.user = React.createRef();\n    this.eventsList = React.createRef();\n    this.eventsInfo = null;\n  }\n\n  componentDidMount() {\n    this.fetchEvents();\n  }\n\n  addEventToUser = (event) => Api.UserEvents.create(this.user.current, event)\n      .then((data) => {\n        this.user.current.addEvent(data);\n      })\n      .catch(({ message }) => {\n        alert(message);\n      })\n\n  removeEventFromUser = (event) => {\n    const { schedule } = this.user.current;\n\n    return Api.UserEvents.delete(schedule[event.id].id)\n      .then((data) => {\n        this.user.current.removeEvent(data);\n      })\n      .catch(({ message }) => {\n        alert(message);\n      });\n  }\n\n  handleOnUserChange = (name, links) => {\n    const { schedule } = this.user.current;\n\n    const eventsList = this.eventsList.current;\n    this.eventsInfo.forEach(({ id }) => {\n      const sched = schedule[id];\n      const state = sched ? { scheduled: true, rating: sched.rating } : { scheduled: null, rating: null };\n      eventsList.updateEvent(id, state);\n    });\n  }\n\n  handleOnEventChange = (event, { scheduled, rating }) => {\n    const { name } = this.user.current;\n    if (name) {\n      if (scheduled !== undefined) {\n        return scheduled ? this.addEventToUser(event) : this.removeEventFromUser(event);\n      }\n    }\n\n    return null;\n  }\n\n  async fetchEvents() {\n    await Api.Event\n      .index()\n      .then((events) => {\n        if (this.eventsList.current) {\n          this.eventsInfo = events.sort((a, b) => a.begins - b.begins);\n          this.eventsList.current.eventsInfo = this.eventsInfo;\n        }\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"main-header\">\n          <User ref={this.user} onChange={this.handleOnUserChange} />\n          <h1>Events</h1>\n        </div>\n        <EventsList ref={this.eventsList} onChange={this.handleOnEventChange} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.sass';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}