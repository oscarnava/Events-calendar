{"version":3,"sources":["reducers/index.js","actions/index.js","containers/Api.js","components/Rating.js","components/Event.js","containers/EventsList.js","containers/User.js","App.js","index.js"],"names":["reducer","state","name","events","type","userEvents","linkId","link","rating","map","e","id","filter","SERVER","DATE_TIME_REGEX","parseDates","data","Object","keys","forEach","key","match","Date","slice","request","params","method","path","body","values","opts","headers","Headers","Accept","JSON","stringify","mode","cache","fetch","vals","join","URL","then","response","json","status","Error","payload","Event","User","email","users","UserEvents","create","user","event","update","userEvent","userevents","delete","stars","false","true","Rating","handleRateClick","rate","target","dataset","onChange","props","value","this","className","data-rate","onClick","React","Component","defaultProps","trimHours","dateTime","Math","floor","trimDays","handleShowMore","extended","setState","handleLinkBtnClick","a","async","scheduled","action","handleRatingClick","newState","isSingleDay","info","begins","ends","beginDay","toDateString","format","title","description","category","logged","undefined","formattedSchedule","style","display","endDay","EventsList","eventNodes","current","updateState","createRef","ref","hideForm","formVisible","handleLogClick","nameInput","emailInput","login","handleSubmitClick","doLogin","doSignup","catch","message","alert","finally","scheduleMemo","focus","schedule","event_id","linkEvent","unlinkEvent","setRating","Api","setUser","fontSize","color","data-login","placeholder","connect","dispatch","forwardRef","App","addEventToUser","addEvent","removeEventFromUser","removeEvent","setEventRating","changeRating","handleOnUserChange","eventsList","eventsInfo","sched","updateEvent","handleOnEventChange","fetchEvents","sort","b","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","render","document","getElementById"],"mappings":"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","file":"static/js/main.3fa01ac6.chunk.js","sourcesContent":["import {\n  SET_USER,\n  SET_RATING,\n  LINK_EVENT,\n  UNLINK_EVENT,\n} from '../actions';\n\nconst reducer = (state = {\n  name: null,\n  events: null,\n}, {\n  type,\n  name,\n  userEvents,\n  linkId,\n  link,\n  rating,\n}) => {\n  switch (type) {\n    case SET_USER:\n      return { ...state, name, events: userEvents };\n\n    case SET_RATING:\n      return { ...state, events: state.events.map((e) => (e.id === linkId ? { ...e, rating } : e)) };\n\n    case LINK_EVENT:\n      return { ...state, events: [...state.events, link] };\n\n    case UNLINK_EVENT:\n      return { ...state, events: state.events.filter((e) => e.id !== linkId) };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","export const SET_USER = 'SET_USER';\nexport const SET_RATING = 'SET_RATING';\nexport const LINK_EVENT = 'LINK_EVENT';\nexport const UNLINK_EVENT = 'UNLINK_EVENT';\n\nexport const setUser = (name, userEvents) => ({\n  type: SET_USER,\n  name,\n  userEvents,\n});\n\nexport const setRating = (linkId, rating) => ({\n  type: SET_RATING,\n  linkId,\n  rating,\n});\n\nexport const linkEvent = (link) => ({\n  type: LINK_EVENT,\n  link,\n});\n\nexport const unlinkEvent = (linkId) => ({\n  type: UNLINK_EVENT,\n  linkId,\n});\n","const SERVER = 'https://events-calendar-morelia.herokuapp.com';\nconst DATE_TIME_REGEX = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z/;\n\nconst URL = (path = '', values = {}) => {\n  const vals = Object.keys(values).map((key) => `/${key}/${values[key]}`).join('');\n  return `${SERVER}${vals}/${path}`;\n};\n\nconst parseDates = (data) => {\n  switch (typeof data) {\n    case 'object': {\n      if (data) {\n        Object.keys(data).forEach((key) => { data[key] = parseDates(data[key]); });\n      }\n      return data;\n    }\n\n    case 'string':\n      return data.match(DATE_TIME_REGEX) ? new Date(data.slice(0, 19)) : data;\n\n    default:\n      return data;\n  }\n};\n\nconst request = (params) => {\n  const {\n    method = 'GET', path = '', body = null, ...values\n  } = params;\n\n  const opts = {\n    method,\n    headers: new Headers({\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    }),\n    body: body && JSON.stringify(body),\n    mode: 'cors',\n    cache: 'default',\n  };\n\n  return fetch(URL(path, values), opts)\n    .then((response) => response.json())\n    .then((data) => {\n      if (data.status !== 'ok') {\n        throw Error(data.status);\n      }\n      return data.payload;\n    })\n    .then(parseDates);\n};\n\nconst Event = {\n  index: () => request({ path: 'events' }),\n};\n\nconst User = {\n  create: (name, email) => request({ method: 'POST', path: 'users', body: { name, email } }),\n  findByName: (name) => request({ users: name }),\n};\n\nconst UserEvents = {\n  create: (user, event) => request({\n    method: 'POST', path: 'userevents', events: event.id, users: user.name,\n  }),\n  update: (userEvent, rating) => request({ method: 'PUT', userevents: userEvent, body: { rating } }),\n  delete: (userEvent) => request({ method: 'DELETE', userevents: userEvent }),\n};\n\nexport {\n  SERVER,\n  URL,\n  Event,\n  User,\n  UserEvents,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './Rating.sass';\n\nconst stars = { false: '\\u2606', true: '\\u2605' };\n\nexport default class Rating extends React.Component {\n  handleRateClick = ({ target }) => {\n    const { dataset: { rate } } = target;\n    const { onChange } = this.props;\n    if (onChange) onChange(+rate);\n  }\n\n  render() {\n    const { value } = this.props;\n    return (\n      <div className=\"Rating\">\n        <button data-rate=\"1\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 0]}</button>\n        <button data-rate=\"2\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 1]}</button>\n        <button data-rate=\"3\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 2]}</button>\n        <button data-rate=\"4\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 3]}</button>\n        <button data-rate=\"5\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 4]}</button>\n      </div>\n    );\n  }\n}\n\nRating.defaultProps = {\n  value: null,\n  onChange: null,\n};\n\nRating.propTypes = {\n  value: PropTypes.number,\n  onChange: PropTypes.func,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport format from 'date-format';\nimport Rating from './Rating';\nimport './Event.sass';\n\nconst DATE_FORMAT = 'dd/MM/yyyy at hh:mm';\nconst DAY_IN_MILIS = 86400000;\n\nconst trimHours = (dateTime) => new Date(Math.floor(dateTime / DAY_IN_MILIS) * DAY_IN_MILIS);\nconst trimDays = (dateTime) => Math.floor(dateTime % DAY_IN_MILIS);\n\n// const { id, title, description, begins, ends, category }\nexport default class Event extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      extended: !!props.extended,\n      rating: props.rating || null,\n    };\n  }\n\n  get id() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return this.props.info.id;\n  }\n\n  get beginDay() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return trimHours(this.props.info.begins);\n  }\n\n  get endDay() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return trimHours(this.props.info.ends);\n  }\n\n  get isSingleDay() {\n    return Math.floor(this.beginDay) === Math.floor(this.endDay);\n  }\n\n  handleShowMore = () => {\n    const { extended } = this.state;\n    this.setState({ extended: !extended });\n  }\n\n  handleLinkBtnClick = async () => {\n    const { scheduled } = this.state;\n\n    // eslint-disable-next-line react/destructuring-assignment\n    const action = this.props.onChange(this, { scheduled: !scheduled });\n    if (action) {\n      await action.then(() => {\n        this.setState({ scheduled: !scheduled });\n      });\n    }\n  }\n\n  handleRatingClick = (rating) => {\n    // eslint-disable-next-line react/destructuring-assignment\n    this.props.onChange(this, { rating });\n  }\n\n  updateState(newState) {\n    const { scheduled, rating } = newState;\n    this.setState({ scheduled, rating });\n  }\n\n  formattedSchedule() {\n    if (this.isSingleDay) {\n      const { info: { begins, ends } } = this.props;\n      if (trimDays(begins) === trimDays(ends)) { // Extract the hours part\n        return `${this.beginDay.toDateString()}, at ${format('hh:mm', begins)}`;\n      }\n\n      return `${this.beginDay.toDateString()}, from ${format('hh:mm', begins)} to ${format('hh:mm', ends)}`;\n    }\n\n    const { info: { begins, ends } } = this.props;\n    if (trimDays(begins) || trimDays(ends)) { // Extract the hours part\n      return `From ${begins.toDateString()} to ${ends.toDateString()}`;\n    }\n\n    return `From ${format(DATE_FORMAT, begins)} to ${format(DATE_FORMAT, ends)}`;\n  }\n\n  render() {\n    const {\n      info: {\n        title,\n        description,\n        category,\n      },\n    } = this.props;\n\n    const { extended, scheduled, rating } = this.state;\n    const logged = (scheduled !== undefined);\n\n    return (\n      <div className=\"Event\">\n        <div className=\"time-line\" />\n        <div className=\"schedule\">{this.formattedSchedule()}</div>\n        <div className=\"title\">{title}</div>\n        <div className=\"description\" style={extended ? {} : { display: 'none' }}>{extended ? description : ''}</div>\n        <div className=\"category\">{category}</div>\n        <button type=\"button\" className={`btn ${scheduled ? 'scheduled' : 'add'}`} style={logged ? {} : { display: 'none' }} onClick={this.handleLinkBtnClick}>\n          <span>{scheduled ? '- schedule' : '+ schedule'}</span>\n        </button>\n        <button type=\"button\" className=\"more\" onClick={this.handleShowMore}>\n          { extended ? 'Show less' : 'Show more' }\n        </button>\n        <div className=\"rating\" style={logged && scheduled ? {} : { display: 'none' }}>\n          <Rating value={rating} onChange={this.handleRatingClick} />\n        </div>\n      </div>\n    );\n  }\n}\n\nEvent.defaultProps = {\n  extended: false,\n  rating: null,\n};\n\nEvent.propTypes = {\n  info: PropTypes.exact({\n    id: PropTypes.number,\n    title: PropTypes.string,\n    description: PropTypes.string,\n    begins: PropTypes.instanceOf(Date),\n    ends: PropTypes.instanceOf(Date),\n    category: PropTypes.string,\n  }).isRequired,\n  extended: PropTypes.bool,\n  rating: PropTypes.number,\n  onChange: PropTypes.func.isRequired,\n};\n","/* eslint-disable react/prefer-stateless-function */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './EventsList.sass';\nimport Event from '../components/Event';\n\nexport default class EventsList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      events: null,\n    };\n    this.eventNodes = {};\n  }\n\n  componentDidUpdate() {\n  }\n\n  /**\n   * @param {Array} events\n   */\n  set eventsInfo(events) {\n    this.setState({ events });\n  }\n\n  updateEvent(id, { scheduled, rating }) {\n    this.eventNodes[id].current.updateState({ scheduled, rating });\n  }\n\n  render() {\n    const { onChange } = this.props;\n    const { events } = this.state;\n\n    return (\n      <div className=\"events-list\">\n        { events ? events.map((event) => {\n          const { id } = event;\n          this.eventNodes[id] = this.eventNodes[id] || React.createRef();\n          return (\n            <Event\n              key={id}\n              ref={this.eventNodes[id]}\n              info={event}\n              onChange={onChange}\n            />\n          );\n        }) : 'Loading...'}\n      </div>\n    );\n  }\n}\n\nEventsList.propTypes = {\n  onChange: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as Api from './Api';\nimport './User.sass';\n\nimport {\n  setUser,\n  setRating,\n  linkEvent,\n  unlinkEvent,\n} from '../actions';\n\nconst mapStateToProps = ({\n  name, events,\n}) => ({\n  name, events,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  setUser: (name, events) => dispatch(setUser(name, events)),\n  setRating: (linkId, rating) => dispatch(setRating(linkId, rating)),\n  linkEvent: (link) => dispatch(linkEvent(link)),\n  unlinkEvent: (linkId) => dispatch(unlinkEvent(linkId)),\n});\n\nclass User extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formVisible: false,\n      login: true,\n    };\n    this.nameInput = React.createRef();\n    this.emailInput = React.createRef();\n    this.scheduleMemo = null;\n  }\n\n  componentDidUpdate() {\n    // eslint-disable-next-line react/destructuring-assignment\n    if (this.state.formVisible) this.nameInput.current.focus();\n\n    const { name, onChange } = this.props;\n    onChange(name, this.schedule);\n  }\n\n  get name() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return this.props.name;\n  }\n\n  get schedule() {\n    const { events } = this.props;\n    const schedule = {};\n    if (!events) return schedule;\n\n    // eslint-disable-next-line camelcase\n    events.forEach(({ id, event_id, rating }) => { schedule[event_id] = { id, rating }; });\n    return schedule;\n  }\n\n  hideForm = () => {\n    this.setState({\n      formVisible: false,\n    });\n  }\n\n  handleLogClick = ({ target }) => {\n    this.nameInput.current.value = '';\n    this.emailInput.current.value = '';\n    this.setState({\n      formVisible: true,\n      login: !!target.dataset.login,\n    });\n  }\n\n  handleSubmitClick = () => {\n    if (this.nameInput.current.value === '') {\n      this.hideForm();\n      return;\n    }\n\n    // eslint-disable-next-line react/destructuring-assignment\n    (this.state.login ? this.doLogin() : this.doSignup())\n      .catch(({ message }) => {\n        alert(message);\n      })\n      .finally(this.hideForm);\n  }\n\n  // eslint-disable-next-line camelcase\n  addEvent({ id, event_id, rating }) {\n    const { linkEvent } = this.props;\n    linkEvent({ id, event_id, rating });\n  }\n\n  removeEvent({ id }) {\n    const { unlinkEvent } = this.props;\n    unlinkEvent(id);\n  }\n\n  changeRating({ id, rating }) {\n    const { setRating } = this.props;\n    setRating(id, rating);\n  }\n\n  async doSignup() {\n    const name = this.nameInput.current.value;\n    const email = this.emailInput.current.value;\n    return Api.User\n      .create(name, email)\n      .then(({ name }) => {\n        const { setUser } = this.props;\n        setUser(name);\n      });\n  }\n\n  async doLogin() {\n    const name = this.nameInput.current.value;\n    return Api.User\n      .findByName(name)\n      .then(({ name, userevents }) => {\n        const { setUser } = this.props;\n        setUser(name, userevents);\n      });\n  }\n\n  render() {\n    const { login, formVisible } = this.state;\n    return (\n      <div className=\"User\">\n        <div className=\"name\" style={this.name ? {} : { fontSize: '0.9rem', color: 'lightgrey' }}>\n          {this.name ? `Welcome ${this.name}!` : 'Login to save your schedule  \\u2933'}\n        </div>\n        <button type=\"button\" className=\"login\" data-login onClick={this.handleLogClick}>\n          Login\n        </button>\n        <button type=\"button\" className=\"signup\" onClick={this.handleLogClick}>\n          Signup\n        </button>\n        <div className=\"form\" style={formVisible ? {} : { display: 'none' }}>\n          <input type=\"input\" className=\"name-in\" ref={this.nameInput} placeholder=\"Name\" />\n          <input type=\"email\" className=\"email-in\" ref={this.emailInput} placeholder=\"email\" style={login ? { display: 'none' } : {}} />\n          <button type=\"button\" className=\"submit\" onClick={this.handleSubmitClick}>\n            {login ? 'Log In' : 'Sign Up'}\n          </button>\n          <button type=\"button\" className=\"cancel\" onClick={this.hideForm}>\n            Cancel\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nUser.defaultProps = {\n  name: null,\n  events: null,\n};\n\nUser.propTypes = {\n  name: PropTypes.string,\n  events: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func.isRequired,\n  setUser: PropTypes.func.isRequired,\n  setRating: PropTypes.func.isRequired,\n  linkEvent: PropTypes.func.isRequired,\n  unlinkEvent: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(User);\n","import React from 'react';\nimport * as Api from './containers/Api';\nimport EventsList from './containers/EventsList';\nimport User from './containers/User';\nimport './App.sass';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.user = React.createRef();\n    this.eventsList = React.createRef();\n    this.eventsInfo = null;\n  }\n\n  componentDidMount() {\n    this.fetchEvents();\n  }\n\n  addEventToUser = (event) => Api.UserEvents.create(this.user.current, event)\n    .then((data) => {\n      this.user.current.addEvent(data);\n    })\n    .catch(({ message }) => {\n      alert(message);\n    })\n\n  removeEventFromUser = (event) => {\n    const { schedule } = this.user.current;\n\n    return Api.UserEvents.delete(schedule[event.id].id)\n      .then((data) => {\n        this.user.current.removeEvent(data);\n      })\n      .catch(({ message }) => {\n        alert(message);\n      });\n  }\n\n  setEventRating = (event, rating) => {\n    const { schedule } = this.user.current;\n\n    return Api.UserEvents.update(schedule[event.id].id, rating)\n      .then((data) => {\n        this.user.current.changeRating(data);\n      })\n      .catch(({ message }) => {\n        alert(message);\n      });\n  }\n\n  handleOnUserChange = () => {\n    const { schedule } = this.user.current;\n\n    const eventsList = this.eventsList.current;\n    this.eventsInfo.forEach(({ id }) => {\n      const sched = schedule[id];\n      const state = sched ? { scheduled: true, rating: sched.rating } : { scheduled: null, rating: null };\n      eventsList.updateEvent(id, state);\n    });\n  }\n\n  handleOnEventChange = (event, { scheduled, rating }) => {\n    const { name } = this.user.current;\n    if (name) {\n      if (scheduled !== undefined) {\n        return scheduled ? this.addEventToUser(event) : this.removeEventFromUser(event);\n      }\n      if (rating !== undefined) {\n        return this.setEventRating(event, rating);\n      }\n    }\n\n    return null;\n  }\n\n  async fetchEvents() {\n    await Api.Event\n      .index()\n      .then((events) => {\n        if (this.eventsList.current) {\n          this.eventsInfo = events.sort((a, b) => a.begins - b.begins);\n          this.eventsList.current.eventsInfo = this.eventsInfo;\n        }\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"main-header\">\n          <User ref={this.user} onChange={this.handleOnUserChange} />\n          <h1>Events</h1>\n        </div>\n        <EventsList ref={this.eventsList} onChange={this.handleOnEventChange} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport reducer from './reducers';\nimport App from './App';\nimport './index.sass';\n\nconst store = createStore(\n  reducer,\n  {\n    formVisible: false,\n  },\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__() // eslint-disable-line\n);\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}