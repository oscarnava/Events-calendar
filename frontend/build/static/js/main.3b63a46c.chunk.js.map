{"version":3,"sources":["reducers/index.js","actions/index.js","containers/Api.js","components/Rating.js","components/Event.js","containers/EventsList.js","components/ErrorMsg.js","containers/User.js","App.js","index.js"],"names":["reducer","state","name","events","type","userEvents","linkId","link","rating","map","e","id","filter","SERVER","DATE_TIME_REGEX","parseDates","data","Object","keys","forEach","key","match","Date","slice","request","params","method","path","body","values","opts","headers","Headers","Accept","JSON","stringify","mode","cache","fetch","vals","join","URL","then","response","json","status","Error","payload","Event","User","email","users","UserEvents","create","user","event","update","userEvent","userevents","delete","stars","false","true","Rating","handleRateClick","rate","target","dataset","onChange","props","value","this","className","data-rate","onClick","React","Component","defaultProps","trimHours","dateTime","Math","floor","trimDays","handleShowMore","extended","setState","handleLinkBtnClick","a","async","scheduled","action","handleRatingClick","logged","newState","isSingleDay","info","begins","ends","beginDay","toDateString","format","title","description","category","formattedSchedule","style","display","endDay","EventsList","eventNodes","current","updateState","createRef","ref","singleton","ErrorMsg","handleClose","visible","message","showErrorMessage","setInterval","hideForm","formVisible","handleLogClick","nameInput","emailInput","login","handleSubmitClick","doLogin","doSignup","catch","finally","scheduleMemo","focus","schedule","event_id","linkEvent","unlinkEvent","setRating","Api","setUser","fontSize","color","data-login","placeholder","connect","dispatch","forwardRef","App","addEventToUser","addEvent","removeEventFromUser","removeEvent","setEventRating","changeRating","handleOnUserChange","eventsList","eventsInfo","sched","updateEvent","handleOnEventChange","undefined","fetchEvents","sort","b","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","render","document","getElementById"],"mappings":"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","file":"static/js/main.3b63a46c.chunk.js","sourcesContent":["import {\n  SET_USER,\n  SET_RATING,\n  LINK_EVENT,\n  UNLINK_EVENT,\n} from '../actions';\n\nconst reducer = (state = {\n  name: null,\n  events: null,\n}, {\n  type,\n  name,\n  userEvents,\n  linkId,\n  link,\n  rating,\n}) => {\n  switch (type) {\n    case SET_USER:\n      return { ...state, name, events: userEvents };\n\n    case SET_RATING:\n      return { ...state, events: state.events.map((e) => (e.id === linkId ? { ...e, rating } : e)) };\n\n    case LINK_EVENT:\n      return { ...state, events: [...state.events, link] };\n\n    case UNLINK_EVENT:\n      return { ...state, events: state.events.filter((e) => e.id !== linkId) };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","export const SET_USER = 'SET_USER';\nexport const SET_RATING = 'SET_RATING';\nexport const LINK_EVENT = 'LINK_EVENT';\nexport const UNLINK_EVENT = 'UNLINK_EVENT';\n\nexport const setUser = (name, userEvents) => ({\n  type: SET_USER,\n  name,\n  userEvents,\n});\n\nexport const setRating = (linkId, rating) => ({\n  type: SET_RATING,\n  linkId,\n  rating,\n});\n\nexport const linkEvent = (link) => ({\n  type: LINK_EVENT,\n  link,\n});\n\nexport const unlinkEvent = (linkId) => ({\n  type: UNLINK_EVENT,\n  linkId,\n});\n","const SERVER = 'https://events-calendar-morelia.herokuapp.com';\nconst DATE_TIME_REGEX = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z/;\n\nconst URL = (path = '', values = {}) => {\n  const vals = Object.keys(values).map((key) => `/${key}/${values[key]}`).join('');\n  return `${SERVER}${vals}/${path}`;\n};\n\nconst parseDates = (data) => {\n  switch (typeof data) {\n    case 'object': {\n      if (data) {\n        Object.keys(data).forEach((key) => { data[key] = parseDates(data[key]); });\n      }\n      return data;\n    }\n\n    case 'string':\n      return data.match(DATE_TIME_REGEX) ? new Date(data.slice(0, 19)) : data;\n\n    default:\n      return data;\n  }\n};\n\nconst request = (params) => {\n  const {\n    method = 'GET', path = '', body = null, ...values\n  } = params;\n\n  const opts = {\n    method,\n    headers: new Headers({\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    }),\n    body: body && JSON.stringify(body),\n    mode: 'cors',\n    cache: 'default',\n  };\n\n  return fetch(URL(path, values), opts)\n    .then((response) => response.json())\n    .then((data) => {\n      if (data.status !== 'ok') {\n        throw Error(data.status);\n      }\n      return data.payload;\n    })\n    .then(parseDates);\n};\n\nconst Event = {\n  index: () => request({ path: 'events' }),\n};\n\nconst User = {\n  create: (name, email) => request({ method: 'POST', path: 'users', body: { name, email } }),\n  findByName: (name) => request({ users: name }),\n};\n\nconst UserEvents = {\n  create: (user, event) => request({\n    method: 'POST', path: 'userevents', events: event.id, users: user.name,\n  }),\n  update: (userEvent, rating) => request({ method: 'PUT', userevents: userEvent, body: { rating } }),\n  delete: (userEvent) => request({ method: 'DELETE', userevents: userEvent }),\n};\n\nexport {\n  SERVER,\n  URL,\n  Event,\n  User,\n  UserEvents,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './Rating.sass';\n\nconst stars = { false: '\\u2606', true: '\\u2605' };\n\nexport default class Rating extends React.Component {\n  handleRateClick = ({ target }) => {\n    const { dataset: { rate } } = target;\n    const { onChange } = this.props;\n    if (onChange) onChange(+rate);\n  }\n\n  render() {\n    const { value } = this.props;\n    return (\n      <div className=\"Rating\">\n        <button data-rate=\"1\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 0]}</button>\n        <button data-rate=\"2\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 1]}</button>\n        <button data-rate=\"3\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 2]}</button>\n        <button data-rate=\"4\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 3]}</button>\n        <button data-rate=\"5\" type=\"button\" onClick={this.handleRateClick}>{stars[value > 4]}</button>\n      </div>\n    );\n  }\n}\n\nRating.defaultProps = {\n  value: null,\n  onChange: null,\n};\n\nRating.propTypes = {\n  value: PropTypes.number,\n  onChange: PropTypes.func,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport format from 'date-format';\nimport Rating from './Rating';\nimport './Event.sass';\n\nconst DATE_FORMAT = 'dd/MM/yyyy at hh:mm';\nconst DAY_IN_MILIS = 86400000;\n\nconst trimHours = (dateTime) => new Date(Math.floor(dateTime / DAY_IN_MILIS) * DAY_IN_MILIS);\nconst trimDays = (dateTime) => Math.floor(dateTime % DAY_IN_MILIS);\n\n// const { id, title, description, begins, ends, category }\nexport default class Event extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      extended: !!props.extended,\n      rating: props.rating || null,\n      scheduled: !!props.scheduled,\n      logged: false,\n    };\n  }\n\n  get id() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return this.props.info.id;\n  }\n\n  get beginDay() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return trimHours(this.props.info.begins);\n  }\n\n  get endDay() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return trimHours(this.props.info.ends);\n  }\n\n  get isSingleDay() {\n    return Math.floor(this.beginDay) === Math.floor(this.endDay);\n  }\n\n  handleShowMore = () => {\n    const { extended } = this.state;\n    this.setState({ extended: !extended });\n  }\n\n  handleLinkBtnClick = async () => {\n    const { scheduled } = this.state;\n\n    // eslint-disable-next-line react/destructuring-assignment\n    const action = this.props.onChange(this, { scheduled: !scheduled });\n    if (action) {\n      await action.then(() => {\n        this.setState({ scheduled: !scheduled });\n      });\n    }\n  }\n\n  handleRatingClick = (rating) => {\n    // eslint-disable-next-line react/destructuring-assignment\n    this.props.onChange(this, { rating });\n  }\n\n  updateState(newState) {\n    const { scheduled, rating, logged } = newState;\n    this.setState({ scheduled, rating, logged });\n  }\n\n  formattedSchedule() {\n    if (this.isSingleDay) {\n      const { info: { begins, ends } } = this.props;\n      if (trimDays(begins) === trimDays(ends)) { // Extract the hours part\n        return `${this.beginDay.toDateString()}, at ${format('hh:mm', begins)}`;\n      }\n\n      return `${this.beginDay.toDateString()}, from ${format('hh:mm', begins)} to ${format('hh:mm', ends)}`;\n    }\n\n    const { info: { begins, ends } } = this.props;\n    if (trimDays(begins) || trimDays(ends)) { // Extract the hours part\n      return `From ${begins.toDateString()} to ${ends.toDateString()}`;\n    }\n\n    return `From ${format(DATE_FORMAT, begins)} to ${format(DATE_FORMAT, ends)}`;\n  }\n\n  render() {\n    const {\n      info: {\n        title,\n        description,\n        category,\n      },\n    } = this.props;\n\n    const {\n      extended, scheduled, rating, logged,\n    } = this.state;\n\n    return (\n      <div className=\"Event\">\n        <div className=\"time-line\" />\n        <div className=\"schedule\">{this.formattedSchedule()}</div>\n        <div className=\"title\">{title}</div>\n        <div className=\"description\" style={extended ? {} : { display: 'none' }}>{extended ? description : ''}</div>\n        <div className=\"category\">{category}</div>\n        <button type=\"button\" className={`btn ${scheduled ? 'scheduled' : 'add'}`} style={logged ? {} : { display: 'none' }} onClick={this.handleLinkBtnClick}>\n          <span>{scheduled ? '- schedule' : '+ schedule'}</span>\n        </button>\n        <button type=\"button\" className=\"more\" onClick={this.handleShowMore}>\n          { extended ? 'Show less' : 'Show more' }\n        </button>\n        <div className=\"rating\" style={logged && scheduled ? {} : { display: 'none' }}>\n          <Rating value={rating} onChange={this.handleRatingClick} />\n        </div>\n      </div>\n    );\n  }\n}\n\nEvent.defaultProps = {\n  extended: false,\n  rating: null,\n  scheduled: false,\n};\n\nEvent.propTypes = {\n  info: PropTypes.exact({\n    id: PropTypes.number,\n    title: PropTypes.string,\n    description: PropTypes.string,\n    begins: PropTypes.instanceOf(Date),\n    ends: PropTypes.instanceOf(Date),\n    category: PropTypes.string,\n  }).isRequired,\n  extended: PropTypes.bool,\n  rating: PropTypes.number,\n  scheduled: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n};\n","/* eslint-disable react/prefer-stateless-function */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './EventsList.sass';\nimport Event from '../components/Event';\n\nexport default class EventsList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      events: null,\n    };\n    this.eventNodes = {};\n  }\n\n  componentDidUpdate() {\n  }\n\n  /**\n   * @param {Array} events\n   */\n  set eventsInfo(events) {\n    this.setState({ events });\n  }\n\n  updateEvent(id, { scheduled, rating, logged }) {\n    this.eventNodes[id].current.updateState({ scheduled, rating, logged });\n  }\n\n  render() {\n    const { onChange } = this.props;\n    const { events } = this.state;\n\n    return (\n      <div className=\"events-list\">\n        { events ? events.map((event) => {\n          const { id } = event;\n          this.eventNodes[id] = this.eventNodes[id] || React.createRef();\n          return (\n            <Event\n              key={id}\n              ref={this.eventNodes[id]}\n              info={event}\n              onChange={onChange}\n            />\n          );\n        }) : 'Loading...'}\n      </div>\n    );\n  }\n}\n\nEventsList.propTypes = {\n  onChange: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './ErrorMsg.sass';\n\nlet singleton = null;\n\nclass ErrorMsg extends React.Component {\n  constructor(props) {\n    super(props);\n    singleton = singleton || this;\n    this.state = {\n      message: props.message || '',\n      visible: !!props.visible,\n    };\n  }\n\n  handleClose = () => {\n    this.setState({ visible: false });\n  }\n\n  render() {\n    const { message, visible } = this.state;\n\n    return (\n      <div className={`ErrorMsg ${visible ? '' : 'hidden'}`}>\n        <button className=\"closeBtn\" type=\"button\" onClick={this.handleClose}>{'\\u274C'}</button>\n        <div className=\"message\">\n          {message}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst showErrorMessage = (message) => {\n  if (!singleton) return;\n\n  singleton.setState({ message, visible: true });\n  setInterval(() => {\n    singleton.setState({ visible: false });\n  }, 10000);\n};\n\nErrorMsg.defaultProps = {\n  message: '',\n  visible: false,\n};\n\nErrorMsg.propTypes = {\n  message: PropTypes.string,\n  visible: PropTypes.bool,\n};\n\nexport { ErrorMsg, showErrorMessage };\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { showErrorMessage } from '../components/ErrorMsg';\nimport * as Api from './Api';\nimport './User.sass';\n\nimport {\n  setUser,\n  setRating,\n  linkEvent,\n  unlinkEvent,\n} from '../actions';\n\nconst mapStateToProps = ({\n  name, events,\n}) => ({\n  name, events,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  setUser: (name, events) => dispatch(setUser(name, events)),\n  setRating: (linkId, rating) => dispatch(setRating(linkId, rating)),\n  linkEvent: (link) => dispatch(linkEvent(link)),\n  unlinkEvent: (linkId) => dispatch(unlinkEvent(linkId)),\n});\n\nclass User extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formVisible: false,\n      login: true,\n    };\n    this.nameInput = React.createRef();\n    this.emailInput = React.createRef();\n    this.scheduleMemo = null;\n  }\n\n  componentDidUpdate() {\n    // eslint-disable-next-line react/destructuring-assignment\n    if (this.state.formVisible) this.nameInput.current.focus();\n\n    const { name, onChange } = this.props;\n    onChange(name, this.schedule);\n  }\n\n  get name() {\n    // eslint-disable-next-line react/destructuring-assignment\n    return this.props.name;\n  }\n\n  get schedule() {\n    const { events } = this.props;\n    const schedule = {};\n    if (!events) return schedule;\n\n    // eslint-disable-next-line camelcase\n    events.forEach(({ id, event_id, rating }) => { schedule[event_id] = { id, rating }; });\n    return schedule;\n  }\n\n  hideForm = () => {\n    this.setState({\n      formVisible: false,\n    });\n  }\n\n  handleLogClick = ({ target }) => {\n    this.nameInput.current.value = '';\n    this.emailInput.current.value = '';\n    this.setState({\n      formVisible: true,\n      login: !!target.dataset.login,\n    });\n  }\n\n  handleSubmitClick = () => {\n    if (this.nameInput.current.value === '') {\n      this.hideForm();\n      return;\n    }\n\n    // eslint-disable-next-line react/destructuring-assignment\n    (this.state.login ? this.doLogin() : this.doSignup())\n      .catch(({ message }) => {\n        showErrorMessage(message);\n        // alert(message);\n      })\n      .finally(this.hideForm);\n  }\n\n  // eslint-disable-next-line camelcase\n  addEvent({ id, event_id, rating }) {\n    const { linkEvent } = this.props;\n    linkEvent({ id, event_id, rating });\n  }\n\n  removeEvent({ id }) {\n    const { unlinkEvent } = this.props;\n    unlinkEvent(id);\n  }\n\n  changeRating({ id, rating }) {\n    const { setRating } = this.props;\n    setRating(id, rating);\n  }\n\n  async doSignup() {\n    const name = this.nameInput.current.value;\n    const email = this.emailInput.current.value;\n    return Api.User\n      .create(name, email)\n      .then(({ name }) => {\n        const { setUser } = this.props;\n        setUser(name);\n      });\n  }\n\n  async doLogin() {\n    const name = this.nameInput.current.value;\n    return Api.User\n      .findByName(name)\n      .then(({ name, userevents }) => {\n        const { setUser } = this.props;\n        setUser(name, userevents);\n      });\n  }\n\n  render() {\n    const { login, formVisible } = this.state;\n    return (\n      <div className=\"User\">\n        <div className=\"name\" style={this.name ? {} : { fontSize: '0.9rem', color: 'lightgrey' }}>\n          {this.name ? `Welcome ${this.name}!` : 'Login to save your schedule  \\u27A1'}\n        </div>\n        <button type=\"button\" className=\"login\" data-login onClick={this.handleLogClick}>\n          Login\n        </button>\n        <button type=\"button\" className=\"signup\" onClick={this.handleLogClick}>\n          Signup\n        </button>\n        <div className=\"form\" style={formVisible ? {} : { display: 'none' }}>\n          <input type=\"input\" className=\"name-in\" ref={this.nameInput} placeholder=\"Name\" />\n          <input type=\"email\" className=\"email-in\" ref={this.emailInput} placeholder=\"email\" style={login ? { display: 'none' } : {}} />\n          <button type=\"button\" className=\"submit\" onClick={this.handleSubmitClick}>\n            {login ? 'Log In' : 'Sign Up'}\n          </button>\n          <button type=\"button\" className=\"cancel\" onClick={this.hideForm}>\n            Cancel\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nUser.defaultProps = {\n  name: null,\n  events: null,\n};\n\nUser.propTypes = {\n  name: PropTypes.string,\n  events: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func.isRequired,\n  setUser: PropTypes.func.isRequired,\n  setRating: PropTypes.func.isRequired,\n  linkEvent: PropTypes.func.isRequired,\n  unlinkEvent: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(User);\n","import React from 'react';\nimport * as Api from './containers/Api';\nimport EventsList from './containers/EventsList';\nimport User from './containers/User';\nimport { showErrorMessage, ErrorMsg } from './components/ErrorMsg';\nimport './App.sass';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.user = React.createRef();\n    this.eventsList = React.createRef();\n    this.eventsInfo = null;\n  }\n\n  componentDidMount() {\n    this.fetchEvents();\n  }\n\n  addEventToUser = (event) => Api.UserEvents.create(this.user.current, event)\n    .then((data) => {\n      this.user.current.addEvent(data);\n    })\n    .catch(({ message }) => {\n      showErrorMessage(message);\n    })\n\n  removeEventFromUser = (event) => {\n    const { schedule } = this.user.current;\n\n    return Api.UserEvents.delete(schedule[event.id].id)\n      .then((data) => {\n        this.user.current.removeEvent(data);\n      })\n      .catch(({ message }) => {\n        showErrorMessage(message);\n      });\n  }\n\n  setEventRating = (event, rating) => {\n    const { schedule } = this.user.current;\n\n    return Api.UserEvents.update(schedule[event.id].id, rating)\n      .then((data) => {\n        this.user.current.changeRating(data);\n      })\n      .catch(({ message }) => {\n        showErrorMessage(message);\n      });\n  }\n\n  handleOnUserChange = () => {\n    const { schedule, name } = this.user.current;\n    const eventsList = this.eventsList.current;\n\n    this.eventsInfo.forEach(({ id }) => {\n      const sched = schedule[id];\n      eventsList.updateEvent(id, {\n        scheduled: !!sched,\n        rating: sched ? sched.rating : null,\n        logged: !!name,\n      });\n    });\n  }\n\n  handleOnEventChange = (event, { scheduled, rating }) => {\n    const { name } = this.user.current;\n    if (name) {\n      if (scheduled !== undefined) {\n        return scheduled ? this.addEventToUser(event) : this.removeEventFromUser(event);\n      }\n      if (rating !== undefined) {\n        return this.setEventRating(event, rating);\n      }\n    }\n\n    return null;\n  }\n\n  async fetchEvents() {\n    await Api.Event\n      .index()\n      .then((events) => {\n        if (this.eventsList.current) {\n          this.eventsInfo = events.sort((a, b) => a.begins - b.begins);\n          this.eventsList.current.eventsInfo = this.eventsInfo;\n        }\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"main-header\">\n          <User ref={this.user} onChange={this.handleOnUserChange} />\n          <h1>Events</h1>\n        </div>\n        <EventsList ref={this.eventsList} onChange={this.handleOnEventChange} />\n        <ErrorMsg />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore } from 'redux';\nimport reducer from './reducers';\nimport App from './App';\nimport './index.sass';\n\nconst store = createStore(\n  reducer,\n  {\n    formVisible: false,\n  },\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__() // eslint-disable-line\n);\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}